# 新闻检索服务


## 开发环境

- windows系统，所有command要符合windows系统的规范

## 技术栈

- Java 11
- Spring Boot 2.7.12
- Thymeleaf 模板引擎
- Bootstrap 5.2.3
- jQuery 3.6.0
- MySQL数据库支持
- Swagger API文档
- tomcat 部署

## 需求描述

### 接口服务

**1. 主题业务逻辑**
- 通过接收关键词，返回数量限制，时间范围等参数，作为请求，对数据库进行检索，提取响应的信息并生成json响应

**2 数据库结构**
   - 表名：cob_program，字段名：OBJECTID, FIELD1079
   - 表名：com_basicinfo，字段名：ID, NAME, CREATED
   - 关联关系：OBJECTID=ID

**3 查询示例**
   - 通过关键词在cob_program表的FIELD1079字段内容里查找，找出所有的记录。
   - 用对应的OBJECTID记录去com_basicinfo表里反查对应记录的NAME, CREATED。
   - 结果格式：JSON，包含name, created和组合后的content内容。
   - FIELD1079包含的是XML结构，程序在构成响应json时，需要提取和汇集所有content字段的内容，作为响应中content字段的内容。如果没有提取到，则返回空，不要有默认值。

**4. 数据源**
   - 数据库类型：MySQL
   - 数据类型：多个表需要关联搜索，存储了节目的语音转换文字的文字信息，节目名称，入库时间等。

**3. 接口功能**
   - 查询功能：通过输入的1个或者多个关键词，查找包含这些关键词的语音文字信息，并关联找出对应的节目名称，入库时间等。
   - 支持复杂查询：需要支持过滤、排序、分页。

**4. 接口安全性**
   - 不需要身份验证和授权机制。

**5. 接口格式**
   - 返回数据格式：JSON
   - 支持多种数据格式：包括字符串，大文本，时间类型等。

**6. 错误处理**
   - 返回详细的出错信息，并记录在日志中。

**7. 接口文档**
   - 需要生成接口文档，具体工具和格式由开发者选择。

**8. 部署和环境**
   - 部署环境：本地服务器，使用Tomcat。
   - 技术栈：Spring Boot

**9. 数据过滤**
   - 需要在从数据库取回信息后进行数据过滤，去除不需要的内容。

**10. 并发处理需求**
   - 最大支持200人的同时查询，响应最好是异步的。

**11. 日志记录要求**
   - 日志放在Tomcat的默认目录下。

**12. 接口文档**
   - 使用Swagger生成接口文档。

**13. 排序和权重**
   - 自行设计和实现权重计算方法
   - 为搜索结果添加权重，并按照权重排序


### 页面需求记录

**1 数据库配置界面**
   - 自行设计测试页面样式
   - 提供Web界面用于配置数据库连接信息
   - 配置信息应包括：数据库名、链接地址、用户名、密码等必要参数，友好的配置方式，隐藏不必要的信息
   - 提供数据库连接测试功能，验证配置的有效性
   - 配置信息应保存到外部配置文件，支持应用重启后读取

**2 测试界面**
   - 自行设计测试页面样式
   - 能够通过关键词对数据库检索功能进行测试
   - 详细输出检索过程和结果展示，要包括最终json的输出结果

**3 api文档界面**
   - 自行设计测试页面样式
   - 详细展示api接口的相关信息

**3 欢迎界面**
   - 自行设计测试页面样式
   - 通过欢迎界面访问数据库配置、测试和api文档界面

**4 其他要求**
   - 风格要保持统一
   - 分页面和主页面之间要有跳转按钮
   - 数据库的配置要能在各个页面通用，也就是配置页面保存的数据库信息，在测试页面要能够生效


### 其他需求记录

**1. 无数据库启动模式**
   - 应用必须能够在没有数据库连接的情况下正常启动和运行
   - 提供明显的日志信息指示应用处于"无数据库模式"
   - 在UI界面上显示应用当前的数据库连接状态
   - 搜索功能在无数据库模式下应提供友好的提示信息而非错误页面

**2. 数据库**
   - 只采用jdbc链接